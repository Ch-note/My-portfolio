<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>핑구 이상형 월드컵</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Jua', sans-serif;
            background-color: #f0f4f8;
            color: #2c3e50;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            overflow: hidden;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
        }
        .image-container {
            width: 100%;
            padding-top: 100%; /* 1:1 Aspect Ratio */
            position: relative;
        }
        .image-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

<div class="container text-center">
    <h1 id="title" class="text-4xl font-bold mb-8">핑구 이상형 월드컵 (8강)</h1>
    <div id="game-container" class="flex flex-col md:flex-row items-center justify-center gap-6">
        <div id="card1" class="card w-full md:w-1/2 p-4 text-center">
            <div class="image-container rounded-lg mb-4">
                <img id="image1" src="" alt="Pingu Character 1" class="rounded-lg">
            </div>
            <p id="name1" class="text-xl font-semibold"></p>
        </div>
        <p id="vs-text" class="text-3xl font-bold md:mb-0 mb-4">VS</p>
        <div id="card2" class="card w-full md:w-1/2 p-4 text-center">
            <div class="image-container rounded-lg mb-4">
                <img id="image2" src="" alt="Pingu Character 2" class="rounded-lg">
            </div>
            <p id="name2" class="text-xl font-semibold"></p>
        </div>
    </div>
    <div id="result-container" class="hidden mt-8 text-center">
        <h2 class="text-3xl font-bold mb-4">최종 우승자</h2>
        <div class="card p-6 inline-block">
            <div class="image-container rounded-lg mb-4 w-64 h-64">
                <img id="winner-image" src="" alt="Winner" class="rounded-lg">
            </div>
            <p id="winner-name" class="text-2xl font-bold"></p>
        </div>
        <button onclick="startGame()" class="mt-8 px-6 py-3 bg-blue-500 text-white rounded-full text-lg font-bold hover:bg-blue-600 transition">다시 하기</button>
    </div>
</div>

<script>
    const candidates = [
        { name: "핑구", image: "https://raw.githubusercontent.com/Ch-note/My-portfolio/refs/heads/main/images/pingu.jpg" },
        { name: "핑가", image: "https://raw.githubusercontent.com/Ch-note/My-portfolio/refs/heads/main/images/pinga.jpg" },
        { name: "엄격한 핑구", image: "https://raw.githubusercontent.com/Ch-note/My-portfolio/refs/heads/main/images/pingu_strict.jpg" },
        { name: "화난 아빠", image: "https://raw.githubusercontent.com/Ch-note/My-portfolio/refs/heads/main/images/pingudad_angry.jpg" },
        { name: "화난 핑구", image: "https://raw.githubusercontent.com/Ch-note/My-portfolio/refs/heads/main/images/pingu_angry.webp" },
        { name: "행복한 핑구", image: "https://raw.githubusercontent.com/Ch-note/My-portfolio/refs/heads/main/images/pingu_happy.jpg" },
        { name: "물개", image: "https://raw.githubusercontent.com/Ch-note/My-portfolio/refs/heads/main/images/seal_scary.webp" },
        { name: "핑구 bye", image: "https://raw.githubusercontent.com/Ch-note/My-portfolio/refs/heads/main/images/pingu_goodbye.jpg" }
    ];

    let roundCandidates = [...candidates];
    let nextRoundCandidates = [];
    let currentRound = 8;
    let roundIndex = 0;

    const titleEl = document.getElementById('title');
    const gameContainerEl = document.getElementById('game-container');
    const resultContainerEl = document.getElementById('result-container');
    const vsTextEl = document.getElementById('vs-text');
    const card1 = document.getElementById('card1');
    const card2 = document.getElementById('card2');
    const image1 = document.getElementById('image1');
    const name1 = document.getElementById('name1');
    const image2 = document.getElementById('image2');
    const name2 = document.getElementById('name2');
    const winnerImage = document.getElementById('winner-image');
    const winnerName = document.getElementById('winner-name');

    function updateUI() {
        // 최종 우승자 결정
        if (roundCandidates.length === 1 && nextRoundCandidates.length === 0) {
            showWinner(roundCandidates[0]);
            return;
        }

        // 현재 라운드 종료, 다음 라운드로 전환
        if (roundIndex >= roundCandidates.length) {
            roundCandidates = [...nextRoundCandidates];
            nextRoundCandidates = [];
            currentRound = roundCandidates.length;
            roundIndex = 0;
            titleEl.innerText = `핑구 이상형 월드컵 (${currentRound}강)`;
            // 다음 라운드를 시작하기 위해 updateUI를 재귀 호출
            updateUI();
            return;
        }

        const candidate1 = roundCandidates[roundIndex];
        const candidate2 = roundCandidates[roundIndex + 1];

        // 후보가 홀수일 경우 남은 한 명을 다음 라운드에 자동 진출
        if (!candidate2) {
             nextRoundCandidates.push(candidate1);
             roundIndex += 1;
             updateUI();
             return;
        }

        image1.src = candidate1.image;
        name1.innerText = candidate1.name;
        image2.src = candidate2.image;
        name2.innerText = candidate2.name;

        card1.onclick = () => {
            nextRoundCandidates.push(candidate1);
            roundIndex += 2;
            updateUI();
        };

        card2.onclick = () => {
            nextRoundCandidates.push(candidate2);
            roundIndex += 2;
            updateUI();
        };
    }

    function showWinner(winner) {
        gameContainerEl.classList.add('hidden');
        vsTextEl.classList.add('hidden');
        titleEl.classList.add('hidden');
        resultContainerEl.classList.remove('hidden');

        winnerImage.src = winner.image;
        winnerName.innerText = winner.name;
    }

    function startGame() {
        // 후보를 무작위로 섞어 새로운 게임 시작
        roundCandidates = [...candidates].sort(() => Math.random() - 0.5);
        nextRoundCandidates = [];
        currentRound = candidates.length;
        roundIndex = 0;

        titleEl.innerText = `핑구 이상형 월드컵 (${currentRound}강)`;
        gameContainerEl.classList.remove('hidden');
        vsTextEl.classList.remove('hidden');
        titleEl.classList.remove('hidden');
        resultContainerEl.classList.add('hidden');

        updateUI();
    }

    // 페이지 로드 시 게임 시작
    window.onload = startGame;

</script>

</body>
</html>
